import{r as t,c as e,h as i,F as a,g as s,f as n,H as o}from"./p-d703c309.js";import{C as r,I as l,S as c}from"./p-7bc068d0.js";import{a as h,f as p,q as m,g as d,C as f}from"./p-e14d02bd.js";import{g as u}from"./p-b680e425.js";import{g as v}from"./p-0b4cf4f0.js";import{c as g}from"./p-81851569.js";import{T as b,A as y,P as x,a as w,C as k,H as E}from"./p-cfca3908.js";import{d as _,u as D,c as H,C as I}from"./p-058e0f2a.js";import{C}from"./p-84987ce5.js";import{T as P,a as A}from"./p-b40dfac1.js";import{g as T}from"./p-927ebebc.js";const M=["ArrowUp","ArrowDown"],j=["ArrowUp","ArrowDown","End","Home"];let O=class{constructor(i){t(this,i),this.calciteActionMenuOpenChange=e(this,"calciteActionMenuOpenChange",7),this.expanded=!1,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.actionElements=[],this.mutationObserver=g("mutation",(()=>this.getActions())),this.guid=`calcite-action-menu-${v()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.activeMenuItemIndex=-1,this.connectMenuButtonEl=()=>{const{el:t,menuButtonId:e,menuId:i,open:a,label:s}=this,n=h(t,c.trigger)||this.defaultMenuButtonEl;this.menuButtonEl!==n&&(this.disconnectMenuButtonEl(),this.menuButtonEl=n,this.setTooltipReferenceElement(),n&&(n.active=a,n.setAttribute("aria-controls",i),n.setAttribute("aria-expanded",a.toString()),n.setAttribute("aria-haspopup","true"),n.id||(n.id=e),n.label||(n.label=s),n.text||(n.text=s),n.addEventListener("click",this.menuButtonClick),n.addEventListener("keydown",this.menuButtonKeyDown),n.addEventListener("keyup",this.menuButtonKeyUp)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:t}=this;t&&(t.removeEventListener("click",this.menuButtonClick),t.removeEventListener("keydown",this.menuButtonKeyDown),t.removeEventListener("keyup",this.menuButtonKeyUp))},this.setDefaultMenuButtonEl=t=>{this.defaultMenuButtonEl=t,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.setTooltipReferenceElement=()=>{const{el:t,expanded:e,menuButtonEl:i}=this,a=h(t,c.tooltip),s="SLOT"===(null==a?void 0:a.tagName)?a.assignedElements()[0]:a;"CALCITE-TOOLTIP"===(null==s?void 0:s.tagName)&&(s.referenceElement=e?null:i)},this.updateAction=(t,e)=>{const{guid:i,activeMenuItemIndex:a}=this,s=`${i}-action-${e}`;t.tabIndex=-1,t.setAttribute("role","menuitem"),t.id||(t.id=s),t.active=e===a},this.updateActions=t=>{null==t||t.forEach(this.updateAction)},this.getActions=()=>{const{el:t}=this,e=this.getAssignedElements().filter((t=>"CALCITE-ACTION"===t.tagName&&"trigger"!==t.slot)),i=e.length?e:Array.from(t.querySelectorAll("calcite-action:not([slot=trigger])"));this.updateActions(i),this.actionElements=i,this.connectMenuButtonEl()},this.menuButtonKeyUp=t=>{const{key:e}=t,{actionElements:i}=this;this.isValidKey(e,M)&&(t.preventDefault(),i.length&&(this.toggleOpen(!0),this.handleActionNavigation(e,i)))},this.menuButtonKeyDown=t=>{const{key:e}=t;this.isValidKey(e,M)&&t.preventDefault()},this.menuActionsContainerKeyDown=t=>{const{key:e}=t,{actionElements:i,activeMenuItemIndex:a}=this;if("Tab"!==e)if(" "!==e&&"Enter"!==e)this.isValidKey(e,j)&&t.preventDefault();else{t.preventDefault();const e=i[a];e?e.click():this.toggleOpen(!1)}else this.open=!1},this.menuActionsContainerKeyUp=t=>{const{key:e}=t,{actionElements:i}=this;"Escape"!==e?this.isValidKey(e,j)&&(t.preventDefault(),i.length&&this.handleActionNavigation(e,i)):this.toggleOpen(!1)},this.handleActionNavigation=(t,e)=>{const i=this.activeMenuItemIndex;"Home"===t&&(this.activeMenuItemIndex=0),"End"===t&&(this.activeMenuItemIndex=e.length-1),"ArrowUp"===t&&(this.activeMenuItemIndex=u(Math.max(i-1,-1),e.length)),"ArrowDown"===t&&(this.activeMenuItemIndex=u(i+1,e.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(t=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=t}}connectedCallback(){var t;null===(t=this.mutationObserver)||void 0===t||t.observe(this.el,{childList:!0,subtree:!0}),this.getActions()}disconnectedCallback(){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(t){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=t),this.calciteActionMenuOpenChange.emit(t)}closeCalciteActionMenuOnClick(t){t.composedPath().includes(this.el)||(this.open=!1)}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){p(this.open?this.menuEl:this.menuButtonEl)}renderMenuButton(){const{el:t,label:e,scale:a}=this,s=i("slot",{name:c.trigger},i("calcite-action",{class:r.defaultTrigger,icon:l.menu,ref:this.setDefaultMenuButtonEl,scale:a,text:e}));return h(t,c.tooltip)?i("calcite-tooltip-manager",null,s):s}renderMenuItems(){const{actionElements:t,activeMenuItemIndex:e,open:a,menuId:s,menuButtonEl:n,label:o,placement:l,overlayPositioning:c}=this,h=t[e];return i("calcite-popover",{disablePointer:!0,label:o,offsetDistance:0,open:a,overlayPositioning:c,placement:l,referenceElement:n},i("div",{"aria-activedescendant":(null==h?void 0:h.id)||null,"aria-labelledby":null==n?void 0:n.id,class:r.menu,id:s,onClick:this.handleCalciteActionClick,onKeyDown:this.menuActionsContainerKeyDown,onKeyUp:this.menuActionsContainerKeyUp,ref:t=>this.menuEl=t,role:"menu",tabIndex:-1},i("slot",null)))}render(){return i(a,null,this.renderMenuButton(),this.renderMenuItems(),i("slot",{name:c.tooltip}))}getAssignedElements(){return Array.from(this.el.querySelectorAll("slot")).map((t=>t.assignedElements({flatten:!0}))).reduce(((t,e)=>t.concat(e)),[])}isValidKey(t,e){return!!e.find((e=>e===t))}get el(){return s(this)}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}};O.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:300ms}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:flex;flex-direction:column;box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size-1)}.menu ::slotted(calcite-action){display:flex;outline-offset:0;outline-color:transparent;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;margin:0.125rem}::slotted(calcite-action[active]){outline:2px solid var(--calcite-ui-brand);outline-offset:2px;outline-offset:0px}.default-trigger{align-self:stretch;flex:0 1 auto;height:100%;position:relative}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){align-self:stretch;flex:0 1 auto;height:100%;position:relative}.menu{flex-direction:column;flex-wrap:nowrap;outline:2px solid transparent;outline-offset:2px}";let $=class{constructor(i){t(this,i),this.calcitePopoverClose=e(this,"calcitePopoverClose",7),this.calcitePopoverOpen=e(this,"calcitePopoverOpen",7),this.closeButton=!1,this.dismissible=!1,this.disableFlip=!1,this.disablePointer=!1,this.offsetDistance=_,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.intlClose=b.close,this.guid=`calcite-popover-${v()}`,this.activeTransitionProp="opacity",this.setUpReferenceElement=()=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement();const{el:t,referenceElement:e,effectiveReferenceElement:i}=this;e&&!i&&console.warn(`${t.tagName}: reference-element id "${e}" was not found.`,{el:t}),this.addReferences(),this.createPopper()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:t,open:e}=this;t&&t.setAttribute(y,e.toString())},this.addReferences=()=>{const{effectiveReferenceElement:t}=this;if(!t)return;const e=this.getId();t.setAttribute(x,e),t.setAttribute(w,e),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:t}=this;t&&(t.removeAttribute(x),t.removeAttribute(w),t.removeAttribute(y))},this.hide=()=>{this.open=!1},this.transitionEnd=t=>{t.propertyName===this.activeTransitionProp&&(this.open?this.calcitePopoverOpen.emit():this.calcitePopoverClose.emit())}}offsetDistanceOffsetHandler(){this.reposition()}offsetSkiddingHandler(){this.reposition()}openHandler(){this.reposition(),this.setExpandedAttr()}placementHandler(){this.reposition()}referenceElementHandler(){this.setUpReferenceElement()}componentWillLoad(){this.setUpReferenceElement()}componentDidLoad(){this.reposition()}disconnectedCallback(){this.removeReferences(),this.destroyPopper()}async reposition(){const{popper:t,el:e,placement:i}=this,a=this.getModifiers();t?await D({el:e,modifiers:a,placement:i,popper:t}):this.createPopper()}async setFocus(t){var e;const{closeButtonEl:i}=this;if("close-button"===t&&i)return n(i),void i.setFocus();null===(e=this.el)||void 0===e||e.focus()}async toggle(t=!this.open){this.open=t}getReferenceElement(){const{referenceElement:t,el:e}=this;return("string"==typeof t?m(e,`#${t}`):t)||null}getModifiers(){const{arrowEl:t,flipPlacements:e,disableFlip:i,disablePointer:a,offsetDistance:s,offsetSkidding:n}=this,o={name:"flip",enabled:!i};e&&(o.options={fallbackPlacements:e});const r={name:"arrow",enabled:!a};return t&&(r.options={element:t}),[r,o,{name:"offset",enabled:!0,options:{offset:[n,s]}}]}createPopper(){this.destroyPopper();const{el:t,placement:e,effectiveReferenceElement:i,overlayPositioning:a}=this,s=this.getModifiers();this.popper=H({el:t,modifiers:s,overlayPositioning:a,placement:e,referenceEl:i})}destroyPopper(){const{popper:t}=this;t&&t.destroy(),this.popper=null}renderCloseButton(){const{dismissible:t,closeButton:e,intlClose:a}=this;return t||e?i("calcite-action",{class:k.closeButton,onClick:this.hide,ref:t=>this.closeButtonEl=t,text:a},i("calcite-icon",{icon:"x",scale:"m"})):null}renderHeader(){const{heading:t,headingLevel:e}=this,a=t?i(C,{class:k.heading,level:e||E},t):null;return a?i("div",{class:k.header},a,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:t,el:e,heading:a,label:s,open:n,disablePointer:r}=this,l="rtl"===d(e),c=t&&n,h=!c,p=r?null:i("div",{class:k.arrow,ref:t=>this.arrowEl=t});return i(o,{"aria-hidden":h.toString(),"aria-label":s,"calcite-hydrated-hidden":h,id:this.getId(),role:"dialog"},i("div",{class:{[f.rtl]:l,[I.animation]:!0,[I.animationActive]:c},onTransitionEnd:this.transitionEnd},p,i("div",{class:{[k.hasHeader]:!!a,[k.container]:!0}},this.renderHeader(),i("div",{class:k.content},i("slot",null)),a?null:this.renderCloseButton())))}get el(){return s(this)}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}};$.style='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:300ms}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:block;position:absolute;z-index:900;transform:scale(0)}.calcite-popper-anim{position:relative;z-index:1;transition:var(--calcite-popper-transition);visibility:hidden;transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);border-radius:0.25rem}:host([data-popper-placement^=bottom]) .calcite-popper-anim{transform:translateY(-5px)}:host([data-popper-placement^=top]) .calcite-popper-anim{transform:translateY(5px)}:host([data-popper-placement^=left]) .calcite-popper-anim{transform:translateX(5px)}:host([data-popper-placement^=right]) .calcite-popper-anim{transform:translateX(-5px)}:host([data-popper-placement]) .calcite-popper-anim--active{opacity:1;visibility:visible;transform:translate(0)}.arrow,.arrow::before{position:absolute;width:8px;height:8px;z-index:-1}.arrow::before{content:"";box-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);transform:rotate(45deg);background:var(--calcite-ui-foreground-1)}:host([data-popper-placement^=top]) .arrow{bottom:-4px}:host([data-popper-placement^=bottom]) .arrow{top:-4px}:host([data-popper-placement^=left]) .arrow{right:-4px}:host([data-popper-placement^=right]) .arrow{left:-4px}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-popper-anim{background-color:var(--calcite-ui-foreground-1);border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);border-radius:0.25rem}.arrow::before{outline:1px solid var(--calcite-ui-border-3)}.header{border-width:0;border-bottom-width:1px;border-bottom-color:var(--calcite-ui-border-3);border-style:solid;display:flex;flex:1 1 auto;align-items:stretch;background-color:var(--calcite-ui-foreground-1);justify-content:flex-start}.heading{display:block;flex:1 1 auto;font-weight:var(--calcite-font-weight-medium);margin:0;padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:0.75rem;align-self:center;color:var(--calcite-ui-text-1);font-size:var(--calcite-font-size-0);line-height:1.375;white-space:normal;word-wrap:break-word;word-break:break-word}.container{background-color:var(--calcite-ui-foreground-1);position:relative;display:flex;overflow:hidden;flex-wrap:nowrap;flex-direction:row;height:100%;color:var(--calcite-ui-text-1);border-radius:0.25rem}.container.has-header{flex-direction:column}.content{display:flex;flex-direction:column;flex-wrap:nowrap;align-self:center;height:100%;width:100%}.calcite--rtl .close-button{border-radius:0.25rem 0 0 0.25rem}::slotted(calcite-panel),::slotted(calcite-flow){height:100%}';let L=class{constructor(e){t(this,e),this.hoverTimeouts=new WeakMap,this.selector=`[${P}]`,this.queryTooltip=t=>{var e;const{selector:i,el:a}=this,s=null===(e=t.closest(i))||void 0===e?void 0:e.getAttribute(P);return m(a,`#${s}`)},this.clearHoverTimeout=t=>{const{hoverTimeouts:e}=this;e.has(t)&&(window.clearTimeout(e.get(t)),e.delete(t))},this.closeExistingTooltip=()=>{const{tooltipEl:t}=this;t&&this.toggleTooltip(t,!1)},this.focusTooltip=({tooltip:t,value:e})=>{this.closeExistingTooltip(),e&&this.clearHoverTimeout(t),this.toggleTooltip(t,e)},this.toggleTooltip=(t,e)=>{t.open=e,e&&(this.tooltipEl=t)},this.hoverToggle=({tooltip:t,value:e})=>{const{hoverTimeouts:i}=this;i.delete(t),e&&this.closeExistingTooltip(),this.toggleTooltip(t,e)},this.hoverTooltip=({tooltip:t,value:e})=>{this.clearHoverTimeout(t);const{hoverTimeouts:i}=this,a=window.setTimeout((()=>this.hoverToggle({tooltip:t,value:e})),A);i.set(t,a)},this.activeTooltipHover=t=>{const{tooltipEl:e,hoverTimeouts:i}=this,{type:a}=t;e&&("mouseover"===a&&t.composedPath().includes(e)?this.clearHoverTimeout(e):"mouseout"!==a||i.has(e)||this.hoverTooltip({tooltip:e,value:!1}))},this.hoverEvent=(t,e)=>{const i=this.queryTooltip(t.target);this.activeTooltipHover(t),i&&this.hoverTooltip({tooltip:i,value:e})},this.focusEvent=(t,e)=>{const i=this.queryTooltip(t.target);i&&i!==this.clickedTooltip?this.focusTooltip({tooltip:i,value:e}):this.clickedTooltip=null}}render(){return i("slot",null)}keyUpHandler(t){if("Escape"===T(t.key)){const{tooltipEl:t}=this;t&&(this.clearHoverTimeout(t),this.toggleTooltip(t,!1))}}mouseEnterShow(t){this.hoverEvent(t,!0)}mouseLeaveHide(t){this.hoverEvent(t,!1)}clickHandler(t){const e=this.queryTooltip(t.target);this.clickedTooltip=e,e&&this.toggleTooltip(e,!1)}focusShow(t){this.focusEvent(t,!0)}blurHide(t){this.focusEvent(t,!1)}get el(){return s(this)}};L.style="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:300ms}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}:root{--calcite-popper-transition:150ms ease-in-out}:host([hidden]){display:none}:host{display:block}";export{O as calcite_action_menu,$ as calcite_popover,L as calcite_tooltip_manager}