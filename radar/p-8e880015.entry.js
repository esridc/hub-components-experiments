import{r as t,h as i}from"./p-d703c309.js";import{r as s,w as e}from"./p-0050330c.js";import{U as r}from"./p-82285f77.js";import{j as a,l as o}from"./p-2f73c2e8.js";import{g as n,b as h,s as p}from"./p-4b2e8de5.js";import"./p-ae8fd155.js";import"./p-a8ccf5d0.js";import"./p-46d9ff3a.js";import"./p-fae24807.js";let d=class{constructor(i){t(this,i),this.orgurl="https://www.arcgis.com",this.callToActionText="Attend",this.triggerRegister=()=>(this.session=s(),this.session?this.toggleRegister():r.beginOAuth2({clientId:this.clientid,portal:`${this.orgurl}/sharing/rest`,redirectUri:`${window.location}authenticate.html`}).then((t=>(e(t),this.session=t.serialize(),this.toggleRegister())))),this.toggleRegister=()=>{return this.attending?function(t){return o({id:t.groupId,authentication:t.authentication})}({groupId:this.eventGroupId,authentication:r.deserialize(this.session)}).then((t=>!0===t.success?(this.callToActionText="Attend",this.attending=!1,{success:!0}):{success:!1})):(t={groupId:this.eventGroupId,authentication:r.deserialize(this.session)},a({id:t.groupId,authentication:t.authentication})).then((t=>{if(!0===t.success)return Promise.resolve()})).catch((t=>{if("User is already a member of group."===t.originalMessage)return Promise.resolve();throw t})).then((()=>(this.callToActionText="Attending",this.attending=!0,{success:!0})));var t}}componentDidLoad(){let t=this.orgurl.replace("maps","hub");n(null,{portal:`${this.orgurl}/sharing/rest/`}).then((i=>{h(i.id).then((i=>{this.eventServiceUrl=i,p({url:this.eventServiceUrl}).then((i=>{if(i.data.length>0)for(let s=0;s<i.data.length;s++)if(i.data[s].attributes.title===this.eventtitle){const e=i.data[s].attributes;this.eventDate=new Date(e.startDate).toString(),this.eventGroupId=e.groupId,this.eventOrganizer=this.digOutContactInfo(e),this.eventUrl=`${t}/events/${e.url}`;break}}))}))}))}digOutContactInfo(t){const i=JSON.parse(t.organizers);if(i.length>0)return`<p>organized by: <a href=mailto:${i[0].contact}>${i[0].name}</a></p>`}render(){return i("hub-card",{name:this.eventtitle,contenttype:"Event",url:this.eventUrl,description:`<p>${this.eventDate}</p><p>${this.eventOrganizer}</p>`,buttonText:this.callToActionText,buttonAction:this.triggerRegister})}};d.style='.hub-event-details{border:1px solid #ccc;border-radius:4px;width:100%;color:#323232;font-size:14px;width:380px;height:400px;font-family:\'Arial\';display:grid;grid-template-columns:auto;grid-template-rows:40% 40% 20%;grid-template-areas:"header"\n    "main"\n    "footer"}.hub-event-background-image{background-color:rgb(255, 174, 0);grid-area:header}.hub-event-content{grid-area:main;padding-left:40px;padding-right:40px}.hub-event-footer{grid-area:footer;padding-left:40px}';export{d as hub_event}