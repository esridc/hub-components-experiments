import{d as e,s as t,g as i,a as n}from"./p-6343e8b1.js";import{_ as a,r}from"./p-ae8fd155.js";import{g as s}from"./p-a8ccf5d0.js";import{g as o}from"./p-6bdf64e1.js";var m,u,c,d,p,f;!function(e){e[e.dataset=1e3]="dataset",e[e.document=1001]="document",e[e.map=1002]="map",e[e.app=1003]="app",e[e.site=1004]="site",e[e.initiative=1005]="initiative",e[e.template=1006]="template"}(m||(m={})),function(e){e[e.member=1]="member",e[e.team=2]="team"}(u||(u={})),function(e){e[e.private=0]="private",e[e.org=1]="org",e[e.public=2]="public"}(c||(c={})),function(e){e[e.view=0]="view",e[e.edit=1]="edit",e[e.admin=2]="admin"}(d||(d={})),function(e){e[e.event=0]="event"}(p||(p={})),function(e){e[e.member=1]="member",e[e.team=2]="team",e[e.event=100]="event",e[e.dataset=1e3]="dataset",e[e.document=1001]="document",e[e.map=1002]="map",e[e.app=1003]="app",e[e.site=1004]="site",e[e.initiative=1005]="initiative",e[e.template=1006]="template",e[e.organization=1007]="organization"}(f||(f={}));const l="https://www.arcgis.com/sharing/rest/";function b(e,t){return void 0!==t&&t.isPortal?h(e,t):function(e,t){return function(e,t){let i="https://hub.arcgis.com/api",n={};return void 0!==t&&void 0!==t.hubApiUrl&&void 0!==t.authentication&&(i=t.hubApiUrl,n.Authorization=t.authentication.token),fetch(`${i}/v3/datasets/${e}`,{method:"GET",mode:"cors",headers:n}).then((e=>e.json())).then((e=>e)).catch((e=>{throw Error(`getFromHubAPI: Error requesting from Hub API: ${e}`)}))}(e,t).then((e=>{let t=w(e.data);return new Promise((e=>{e(t)}))})).catch((i=>{if(403==i.status)return h(e,t)}))}(e,t)}async function D(i,n,o){var m;return m={item:Object.assign({id:i},n),authentication:o},e(m).then((function(e){var i=m.folderId?s(m)+"/content/users/"+e+"/"+m.folderId+"/items/"+m.item.id+"/update":s(m)+"/content/users/"+e+"/items/"+m.item.id+"/update";return m.params=a(a({},m.params),t(m.item)),r(i,m)})),b(i)}function h(e,t){return function(e,t){return Promise.all([i(e,t),n(e,t)]).then((e=>({item:e[0],data:e[1]})))}(e,t).then((e=>new Promise((t=>{t(v(e))}))))}function v(e){console.log("_convertItemToContent",e);let t=o(e.item.type),i=Object.assign(e.item,{name:e.item.title,hubType:f[t],summary:e.item.snippet,publisher:{name:e.item.owner,username:e.item.owner},permissions:{visibility:e.item.access,permission:e.item.itemControl||d.view},contentUrl:e.item.url,license:{name:"Custom License",description:e.item.accessInformation},createdDate:new Date(e.item.created),createdDateSource:"item.created",publishedDate:new Date(e.item.created),publishedDateSource:"item.created",updatedDate:new Date(e.item.modified),updatedDateSource:"item.modified"});return null!=e.item.thumbnail?i.thumbnailUrl=`${l}content/items/${e.item.id}/info/${e.item.thumbnail}`:"Image"===e.item.type&&(i.thumbnailUrl=`${l}content/items/${e.item.id}/data`),i}function w(e){let t=o(e.attributes.type),i={id:e.id,title:e.attributes.name,snippet:e.attributes.searchDescription,owner:e.attributes.owner,description:e.attributes.description,tags:e.attributes.tags,created:e.attributes.created,numViews:0,modified:e.attributes.modified,size:e.attributes.size,type:e.attributes.type,url:e.attributes.url,name:e.attributes.name,hubType:f[t],summary:(e.attributes.searchDescription||"").slice(0,200),publisher:{name:e.attributes.owner,username:e.attributes.owner},permissions:{visibility:e.attributes.access},contentUrl:e.attributes.url,license:{name:"Custom License",description:e.attributes.accessInformation},createdDate:new Date(e.attributes.created),createdDateSource:"item.created",publishedDate:new Date(e.attributes.created),publishedDateSource:"item.created",updatedDate:new Date(e.attributes.modified),updatedDateSource:"item.modified"};return null!=e.attributes.thumbnail?i.thumbnailUrl=`${l}content/items/${e.id}/info/${e.attributes.thumbnail}`:"Image"===e.attributes.type&&(i.thumbnailUrl=`${l}content/items/${e.id}/data`),i}export{u as C,f as H,c as V,v as _,w as a,b as g,D as u}