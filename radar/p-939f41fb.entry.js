import{r as a,h as e,H as s}from"./p-d703c309.js";import{f as t,h as i,i as r,j as l,k as o,l as n}from"./p-9a3108ff.js";import{r as p,t as c}from"./p-0050330c.js";import{H as d}from"./p-8dae81d7.js";import{U as h}from"./p-82285f77.js";import"./p-834ef0aa.js";import"./p-46d9ff3a.js";import"./p-a8ccf5d0.js";import"./p-ae8fd155.js";import"./p-90bbd14a.js";import"./p-797f9b51.js";import"./p-7c13aa15.js";import"./p-4b2e8de5.js";import"./p-fae24807.js";import"./p-6343e8b1.js";import"./p-6bdf64e1.js";let m=class{constructor(e){a(this,e)}async componentWillLoad(){if(this.session=p(),console.log("Session",this.session),this.session){const a=h.deserialize(this.session),e=JSON.parse(this.session).username;this.token=JSON.parse(this.session).token,[this.member,this.teams,this.events,this.places,this.content,this.comments]=await Promise.all([await t(e,a),await i(a),await r(a),await l(e,a),await o(e,a),await n(e,a)]),console.log("Workspace: Events",this.events)}}dateToText(a){const e=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"}),[{value:s},,{value:t},,{value:i}]=e.formatToParts(a);return`${t}-${s}-${i}`}render(){var a;let t=[];return t.push(void 0!==this.session?e("div",{class:"workspace-grid"},e("div",{class:"workspace-avatar"},e("img",{src:this.member.thumbnailUrl,class:"avatar",alt:"Profile Image"})),e("div",{class:"workspace-bio"},e("h1",null,this.member.name),e("p",null,this.member.summary),e("em",null,"Joined ",this.dateToText(this.member.createdDate))),e("div",{class:"workspace-map"},e("hub-places-map",{mode:"view",session:this.session})),e("div",{class:"workspace-interests"},e("h3",null,"Stats"),e("hub-statistic",{size:"m",value:this.teams.meta.total,units:"Teams"}),e("hub-statistic",{size:"m",value:this.events.meta.total,units:"Events"}),e("hub-statistic",{size:"m",value:this.content.meta.total,units:"Content Items"}),e("hub-statistic",{size:"m",value:this.places.length,units:"Places"}),e("hub-statistic",{size:"m",value:this.comments.length,units:"Comments"}),e("h3",null,"Interests"),null===(a=this.member.metadata)||void 0===a?void 0:a.interests.map((a=>e("calcite-chip",{value:a},a))),e("h3",null,"Places"),this.places.map((a=>e("calcite-chip",{value:a.name},a.name," (",a.coverage,")")))),e("div",{class:"workspace-events"},e("h3",null,"Upcoming Events"),e("hub-events-list",{session:this.session}),e("hub-list",{collection:this.teams.results},e("h3",null,"Your Teams"))),e("div",{class:"workspace-teams"},e("div",{class:"gallery-header"},e("h2",null,"My Content"),e("a",{class:"explore",href:"#"},"See all>")),e("div",{class:"gallery"},this.content.results.slice(0,4).map((a=>e("hub-card",{class:"gallery-card",contenttype:`${d[a.hubType]} by ${a.publisher.name}`,image:`${a.thumbnailUrl}?token=${this.token}`,name:c(a.name,55),description:c(a.summary,90),url:a.url,buttonText:`View ${d[a.hubType]}`,onClick:()=>""})))),e("h2",null,"Your Teams"),this.teams.results.slice(0,8).map((a=>e("div",{class:"team-gallery"},e("div",{class:"gallery-header"},e("h4",null,e("a",{href:a.url},a.name," >"))),e("hub-gallery",{session:this.session,limit:4,groups:a.id,showsearch:!1,sort:"modified",hubtype:"content"})))))):e("calcite-loader",{label:"label",text:"Fetching workspace...","is-active":!0})),e(s,null,e("slot",null),t)}};m.style=':host{display:block}.workspace-grid{display:grid;grid-template-columns:15% 30% 30% 25%;grid-template-rows:auto;grid-template-areas:"avatar bio map ."\n    "interests teams teams events";column-gap:10px;row-gap:20px;padding:0 1rem 0 3rem}.workspace-avatar{grid-area:avatar}img.avatar{border-radius:50%}.workspace-bio{grid-area:bio}.workspace-map{grid-area:map;height:200px}.workspace-interests{grid-area:interests}.workspace-events{grid-area:events}.workspace-teams{grid-area:teams;}@media screen and (max-width: 530px){.gallery-card{width:calc((100% - (0 * 30px))/ 1)}}@media screen and (min-width: 530px) and (max-width: 975px){.gallery-card{width:calc((100% - (1 * 30px))/ 2)}}@media screen and (min-width: 975px) and (max-width: 1200px){.gallery-card{width:calc((100% - (2 * 30px))/ 3)}}@media screen and (min-width:1200px){.gallery-card{width:calc((100% - (3 * 30px))/ 4)}}.gallery{display:flex;flex-direction:row;flex-wrap:wrap;margin-bottom:30px;justify-content:space-between}.gallery-card{flex:1;width:32%;color:#4c4c4c;box-shadow:0 0 5px 0 rgba(76,76,76,.25);margin-right:10px;}.gallery-header,h3,h4{border-bottom:1px solid #888;margin-bottom:3px;width:100%}.gallery-header a,.gallery-header h4,.gallery-header h2{display:inline}.gallery-header a{text-decoration:none;color:#448}a.explore{float:right;font-size:0.8em;margin-top:5px}.gallery-header a:hover{text-decoration:underline}.team-gallery{padding:24px;margin:16px 0;width:auto;box-shadow:0 0 0 1px rgba(0,0,0,.15), 0 2px 3px rgba(0,0,0,.2);transition:box-shadow 83ms}';export{m as hub_workspace}